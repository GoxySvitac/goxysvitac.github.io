// Generated by Haxe 4.3.7
(function ($global) { "use strict";
var $estr = function() { return js_Boot.__string_rec(this,''); },$hxEnums = $hxEnums || {},$_;
function $extend(from, fields) {
	var proto = Object.create(from);
	for (var name in fields) proto[name] = fields[name];
	if( fields.toString !== Object.prototype.toString ) proto.toString = fields.toString;
	return proto;
}
var HxOverrides = function() { };
HxOverrides.__name__ = true;
HxOverrides.remove = function(a,obj) {
	var i = a.indexOf(obj);
	if(i == -1) {
		return false;
	}
	a.splice(i,1);
	return true;
};
HxOverrides.now = function() {
	return Date.now();
};
Math.__name__ = true;
var Std = function() { };
Std.__name__ = true;
Std.string = function(s) {
	return js_Boot.__string_rec(s,"");
};
Std.random = function(x) {
	if(x <= 0) {
		return 0;
	} else {
		return Math.floor(Math.random() * x);
	}
};
var StringTools = function() { };
StringTools.__name__ = true;
StringTools.hex = function(n,digits) {
	var s = "";
	do {
		s = "0123456789ABCDEF".charAt(n & 15) + s;
		n >>>= 4;
	} while(n > 0);
	if(digits != null) {
		while(s.length < digits) s = "0" + s;
	}
	return s;
};
var gox_Color = function(r,g,b,a) {
	this.r = r;
	this.g = g;
	this.b = b;
	this.a = a != null ? a : 255;
};
gox_Color.__name__ = true;
gox_Color.prototype = {
	duplicate: function() {
		return new gox_Color(this.r,this.g,this.b,this.a);
	}
	,set: function(c) {
		this.r = c.r;
		this.g = c.g;
		this.b = c.b;
		this.a = c.a;
		return this;
	}
	,alpha: function(a) {
		this.a = Math.round(Math.max(0,Math.min(a,255)));
		return this;
	}
	,multiply: function(k) {
		this.r = Math.round(this.r * k);
		this.g = Math.round(this.g * k);
		this.b = Math.round(this.b * k);
		return this;
	}
	,clamp: function() {
		this.r = Math.max(0,Math.min(this.r,255)) | 0;
		this.g = Math.max(0,Math.min(this.g,255)) | 0;
		this.b = Math.max(0,Math.min(this.b,255)) | 0;
		return this;
	}
	,toHSB: function() {
		this.clamp();
		var rf = this.r / 255;
		var gf = this.g / 255;
		var bf = this.b / 255;
		var max = Math.max(rf,Math.max(gf,bf));
		var delta = max - Math.min(rf,Math.min(gf,bf));
		var h = 0;
		if(delta != 0) {
			if(max == rf) {
				h = (gf - bf) / delta + (gf < bf ? 6 : 0);
			} else if(max == gf) {
				h = (bf - rf) / delta + 2;
			} else {
				h = (rf - gf) / delta + 4;
			}
			h /= 6;
		}
		return new gox_HSB(h,max == 0 ? 0 : delta / max,max);
	}
	,mix: function(c,k) {
		if(k == null) {
			k = 0.5;
		}
		k = Math.max(0,Math.min(k,1));
		this.r = Math.round(this.r + k * (c.r - this.r));
		this.g = Math.round(this.g + k * (c.g - this.g));
		this.b = Math.round(this.b + k * (c.b - this.b));
		return this;
	}
	,toGray: function() {
		var gray = 0.299 * this.r + 0.587 * this.g + 0.114 * this.b | 0;
		this.r = gray;
		this.g = gray;
		this.b = gray;
		return this;
	}
	,oposite: function(options) {
		var hsb = this.toHSB();
		var gray = this.duplicate().toGray();
		hsb.h += 0.5;
		var tmp = options != null ? options.s : null;
		hsb.s *= tmp != null ? tmp : 0.5;
		if(gray.r < 96) {
			var tmp = options != null ? options.b : null;
			hsb.b = tmp != null ? tmp : 1;
		} else {
			var tmp = options != null ? options.b : null;
			hsb.b = 1 - (tmp != null ? tmp : 1);
		}
		return hsb.toRGB();
	}
	,invert: function() {
		this.r = 255 - this.r;
		this.g = 255 - this.g;
		this.b = 255 - this.b;
		return this;
	}
};
var gox_Events = function() { };
gox_Events.__name__ = true;
var gox_FloatRange = function(min,max) {
	this.min = min;
	this.max = max;
};
gox_FloatRange.__name__ = true;
gox_FloatRange.prototype = {
	getRandom: function() {
		return this.min + Math.random() * (this.max - this.min);
	}
};
var gox_y_GComponent = function() {
	this.eventListeners = [];
	this.mouseListeners = [];
	this.children = [];
	this.z = 0;
	this.visible = true;
	this.immortal = false;
	gox_y_GComponent.components.push(this);
};
gox_y_GComponent.__name__ = true;
gox_y_GComponent.paintComponents = function(engine) {
	var _g = 0;
	var _g1 = gox_y_GComponent.components;
	while(_g < _g1.length) {
		var c = _g1[_g];
		++_g;
		if(c.parent == null) {
			c.paint(engine);
		}
	}
};
gox_y_GComponent.layoutComponents = function() {
	var _g = 0;
	var _g1 = gox_y_GComponent.components;
	while(_g < _g1.length) {
		var c = _g1[_g];
		++_g;
		if(c.parent == null) {
			c.layout();
		}
	}
};
gox_y_GComponent.sortComponents = function() {
	gox_y_GComponent.components.sort(function(a,b) {
		return a.z - b.z;
	});
	var _g = 0;
	var _g1 = gox_y_GComponent.components;
	while(_g < _g1.length) _g1[_g++].sortZ();
};
gox_y_GComponent.destroyComponents = function() {
	var saved = [];
	var _g = 0;
	var _g1 = gox_y_GComponent.components;
	while(_g < _g1.length) {
		var component = _g1[_g];
		++_g;
		component.eventListeners = [];
		if(component.immortal) {
			saved.push(component);
		} else {
			component.mouseListeners = [];
		}
	}
	gox_y_GComponent.components = saved;
};
gox_y_GComponent.updateComponents = function() {
	var _g = 0;
	var _g1 = gox_y_GComponent.components;
	while(_g < _g1.length) _g1[_g++].updateComponent();
};
gox_y_GComponent.onMousePressedComponents = function(e) {
	var bestZ = 0;
	var bestComponent = null;
	var _g = 0;
	var _g1 = gox_y_GComponent.components;
	while(_g < _g1.length) {
		var c = _g1[_g];
		++_g;
		if(c.mouseListeners.length == 0) {
			continue;
		}
		if(c.z >= bestZ && e.x >= c.getX() && e.x < c.getX() + c.width && e.y >= c.getY() && e.y < c.getY() + c.height) {
			bestZ = c.z;
			bestComponent = c;
		}
	}
	gox_y_GComponent.pressedComponent = bestComponent;
	if(bestComponent != null) {
		e.x -= bestComponent.getX();
		e.y -= bestComponent.getY();
		e.component = bestComponent;
		var _g = 0;
		var _g1 = bestComponent.mouseListeners;
		while(_g < _g1.length) _g1[_g++].onMousePressed(e);
	}
};
gox_y_GComponent.onMouseReleasedComponents = function(e) {
	if(gox_y_GComponent.pressedComponent != null) {
		e.x -= gox_y_GComponent.pressedComponent.getX();
		e.y -= gox_y_GComponent.pressedComponent.getY();
		e.component = gox_y_GComponent.pressedComponent;
		var _g = 0;
		var _g1 = gox_y_GComponent.pressedComponent.mouseListeners;
		while(_g < _g1.length) _g1[_g++].onMouseReleased(e);
		gox_y_GComponent.pressedComponent = null;
	}
};
gox_y_GComponent.onMouseDraggedComponents = function(e) {
	if(gox_y_GComponent.pressedComponent != null) {
		e.x -= gox_y_GComponent.pressedComponent.getX();
		e.y -= gox_y_GComponent.pressedComponent.getY();
		e.component = gox_y_GComponent.pressedComponent;
		var _g = 0;
		var _g1 = gox_y_GComponent.pressedComponent.mouseListeners;
		while(_g < _g1.length) _g1[_g++].onMouseDragged(e);
	}
};
gox_y_GComponent.onMouseMovedComponents = function(e) {
	var bestZ = 0;
	var bestComponent = null;
	var _g = 0;
	var _g1 = gox_y_GComponent.components;
	while(_g < _g1.length) {
		var c = _g1[_g];
		++_g;
		if(c.mouseListeners.length == 0) {
			continue;
		}
		if(c.z >= bestZ && e.x >= c.getX() && e.x < c.getX() + c.width && e.y >= c.getY() && e.y < c.getY() + c.height) {
			bestZ = c.z;
			bestComponent = c;
		}
	}
	if(gox_y_GComponent.movedComponent != bestComponent) {
		if(gox_y_GComponent.movedComponent != null) {
			e.component = gox_y_GComponent.movedComponent;
			var _g = 0;
			var _g1 = gox_y_GComponent.movedComponent.mouseListeners;
			while(_g < _g1.length) _g1[_g++].onMouseExited(e);
		}
		if(bestComponent != null) {
			e.component = bestComponent;
			var _g = 0;
			var _g1 = bestComponent.mouseListeners;
			while(_g < _g1.length) _g1[_g++].onMouseEntered(e);
		}
		gox_y_GComponent.movedComponent = bestComponent;
	}
};
gox_y_GComponent.prototype = {
	getX: function() {
		if(this.parent == null) {
			return this.x;
		} else {
			return this.parent.getX() + this.x;
		}
	}
	,getY: function() {
		if(this.parent == null) {
			return this.y;
		} else {
			return this.parent.getY() + this.y;
		}
	}
	,getWidth: function() {
		return this.width;
	}
	,getHeight: function() {
		return this.height;
	}
	,addChild: function(component) {
		this.children.push(component);
		component.parent = this;
	}
	,setLayoutManager: function(layoutManager) {
		this.layoutManager = layoutManager;
	}
	,addMouseListener: function(listener) {
		this.mouseListeners.push(listener);
	}
	,setBounds: function(x,y,width,height) {
		this.x = x;
		this.y = y;
		this.width = width;
		this.height = height;
	}
	,setZ: function(value) {
		this.z = value;
	}
	,sortZ: function() {
		this.children.sort(function(a,b) {
			return a.z - b.z;
		});
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) _g1[_g++].sortZ();
	}
	,paintComponent: function(engine) {
	}
	,updateComponent: function() {
	}
	,paint: function(engine) {
		if(!this.visible) {
			return;
		}
		this.paintComponent(engine);
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) _g1[_g++].paint(engine);
	}
	,layout: function() {
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) _g1[_g++].layout();
		if(this.layoutManager != null) {
			this.layoutManager.layout(this);
		}
	}
	,addEventListener: function(listener) {
		this.eventListeners.push(listener);
	}
	,removeEventListener: function(listener) {
		HxOverrides.remove(this.eventListeners,listener);
	}
	,fireEvent: function(e) {
		var _g = 0;
		var _g1 = this.eventListeners;
		while(_g < _g1.length) {
			var listener = _g1[_g];
			++_g;
			if(listener.listeningTo().indexOf(e.name) != -1) {
				listener.onEvent(e);
			}
		}
	}
};
var gox_Game = function() {
	this.fontSize = 24;
	this.bottomMessengerSize = 0;
	this.topMessengerSize = 48;
	this.engine = new jsgox_JSEngine({ fps : 30});
	gox_y_GComponent.call(this);
	gox_Game.instance = this;
	this.immortal = true;
};
gox_Game.__name__ = true;
gox_Game.visitLine = function(ax,ay,bx,by,visit) {
	var dx = bx - ax;
	var dy = by - ay;
	var steps = Math.round(Math.max(Math.abs(dx),Math.abs(dy)));
	var sx = dx / steps;
	var sy = dy / steps;
	var x = ax;
	var y = ay;
	var _g = 0;
	var _g1 = steps + 1;
	while(_g < _g1) {
		++_g;
		visit(x | 0,y | 0);
		x += sx;
		y += sy;
	}
	visit(bx,by);
};
gox_Game.__super__ = gox_y_GComponent;
gox_Game.prototype = $extend(gox_y_GComponent.prototype,{
	clearScreen: function(c) {
		this.engine._setColor(c);
		this.engine._fillRect(0,this.topMessengerSize,this.resolutionW,this.resolutionH);
	}
	,visitCircle: function(cx,cy,r,visit) {
		var _g = cy - r;
		var _g1 = cy + r + 1;
		while(_g < _g1) {
			var y = _g++;
			var _g2 = cx - r;
			var _g3 = cx + r + 1;
			while(_g2 < _g3) {
				var x = _g2++;
				if(Math.sqrt(Math.pow(x - cx,2) + Math.pow(y - cy,2)) < r) {
					visit(x,y);
				}
			}
		}
	}
	,visitRoundedRect: function(x,y,w,h,r,visit) {
		r = Math.min(r,Math.min(w,h) / 2) | 0;
		var _g = y;
		var _g1 = y + h;
		while(_g < _g1) {
			var py = _g++;
			var _g2 = x;
			var _g3 = x + w;
			while(_g2 < _g3) {
				var px = _g2++;
				var dx = px - Math.max(x + r,Math.min(px,x + w - r));
				var dy = py - Math.max(y + r,Math.min(py,y + h - r));
				if(dx * dx + dy * dy <= r * r) {
					visit(px,py);
				}
			}
		}
	}
});
var gox_HSB = function(h,s,b) {
	this.h = h;
	this.s = s;
	this.b = b;
};
gox_HSB.__name__ = true;
gox_HSB.prototype = {
	duplicate: function() {
		return new gox_HSB(this.h,this.s,this.b);
	}
	,clamp: function() {
		this.h = (this.h % 1 + 1) % 1;
		this.s = Math.max(0,Math.min(this.s,1));
		this.b = Math.max(0,Math.min(this.b,1));
	}
	,set: function(h,s,b) {
		this.h = h;
		this.s = s;
		this.b = b;
		return this;
	}
	,multiply: function(h,s,b) {
		this.h *= h;
		this.s *= s;
		this.b *= b;
		return this;
	}
	,toRGB: function() {
		this.clamp();
		var v = this.b;
		var r = 0;
		var g = 0;
		var b = 0;
		var i = Math.floor(this.h * 6);
		var f = this.h * 6 - i;
		var min = v * (1 - this.s);
		var fall = v * (1 - f * this.s);
		var rise = v * (1 - (1 - f) * this.s);
		switch(i % 6) {
		case 0:
			r = v;
			g = rise;
			b = min;
			break;
		case 1:
			r = fall;
			g = v;
			b = min;
			break;
		case 2:
			r = min;
			g = v;
			b = rise;
			break;
		case 3:
			r = min;
			g = fall;
			b = v;
			break;
		case 4:
			r = rise;
			g = min;
			b = v;
			break;
		case 5:
			r = v;
			g = min;
			b = fall;
			break;
		}
		return new gox_Color(Math.round(r * 255),Math.round(g * 255),Math.round(b * 255));
	}
};
var gox_Help = function(game,r1,r2) {
	this.game = game;
	this.r1 = r1;
	this.r2 = r2;
	this.init();
};
gox_Help.__name__ = true;
gox_Help.prototype = {
	init: function() {
		var _gthis = this;
		var backgroundScreen = this.game.colors[this.r1].duplicate().mix(this.game.colors[this.r2]).multiply(0.666);
		var backgroundMenu = backgroundScreen.duplicate().multiply(0.5);
		var foreground = backgroundMenu.oposite();
		var screen = new gox_y_GButton({ y : this.game.topMessengerSize, width : this.game.resolutionW, height : this.game.resolutionH, background : backgroundScreen});
		screen.setLayoutManager(new gox_l_GCenterLayout());
		screen.addChild(new gox_y_GButton({ width : Math.round(this.game.resolutionW * 0.8), height : Math.round(this.game.resolutionH), background : backgroundMenu}));
		var textHolder = new gox_y_GButton({ width : Math.round(this.game.resolutionW * 0.8), height : Math.round(this.getText().length * this.game.fontSize * 1.23456789)});
		textHolder.setLayoutManager(new gox_l_GEvenVecticalLayout());
		screen.addChild(textHolder);
		var lines = this.getText();
		var _g = 0;
		var _g1 = lines.length;
		while(_g < _g1) textHolder.addChild(new gox_y_GButton({ foreground : foreground, text : lines[_g++], textSize : this.game.fontSize}));
		screen.addMouseListener(new gox_y_GMouseAdapter({ onMousePressed : function(e) {
			_gthis.onClick();
		}}));
	}
};
var gox_IntRange = function(min,max) {
	this.min = min;
	this.max = max;
};
gox_IntRange.__name__ = true;
gox_IntRange.prototype = {
	getRandom: function() {
		return this.min + Std.random(this.max - this.min + 1);
	}
};
var gox_Note = function(params) {
	this.frequency = params.frequency;
	this.amplitude = params.amplitude;
	this.phase = params.phase;
	this.startFrame = params.startFrame;
	this.endFrame = params.endFrame;
	this.power = params.power;
	this.clip = params.clip;
};
gox_Note.__name__ = true;
gox_Note.prototype = {
	set: function(params) {
		this.frequency = params.frequency;
		this.amplitude = params.amplitude;
		this.phase = params.phase;
		this.startFrame = params.startFrame;
		this.endFrame = params.endFrame;
		this.power = params.power;
		this.clip = params.clip;
	}
	,duplicate: function() {
		return new gox_Note({ frequency : this.frequency, amplitude : this.amplitude, phase : this.phase, startFrame : this.startFrame, endFrame : this.endFrame, power : this.power, clip : this.clip});
	}
};
var gox_Player = function(playBufferSize) {
	this.note = new gox_Note({ frequency : 0, amplitude : 0, phase : 0, startFrame : 0, endFrame : 0, power : 0, clip : 0});
	this.loopPoint = 0;
	this.playing = false;
	this.playBufferPointer = 0;
	this.playBufferSize = 7938000;
	this.bufferSize = 4096;
	this.sampleRate = 44100.0;
	this.playBufferSize = playBufferSize != null ? playBufferSize : this.playBufferSize;
	this.playBuffer = new Array(playBufferSize);
	this.playBufferBackup = new Array(playBufferSize);
	this.polyphony = new Array(playBufferSize);
	this.polyphonyBackup = new Array(playBufferSize);
	this.loopPoint = (playBufferSize / this.bufferSize | 0) * this.bufferSize;
	this._silence();
};
gox_Player.__name__ = true;
gox_Player.prototype = {
	writeNoteToBuffers: function(note) {
		var phaseIncrement = 2.0 * Math.PI * note.frequency / this.sampleRate;
		var _g = note.startFrame;
		var _g1 = note.endFrame + 1;
		while(_g < _g1) {
			var sample = Math.sin(note.phase) * note.amplitude;
			sample = Math.pow(sample,note.power);
			sample = Math.max(-note.clip,Math.min(note.clip,sample));
			var j = _g++ % this.loopPoint;
			this.playBuffer[j] += sample;
			this.polyphony[j] += 1;
			if((note.phase += phaseIncrement) > 2 * Math.PI) {
				note.phase -= 2 * Math.PI;
			}
		}
	}
	,step: function() {
		if(!this.playing) {
			var _g = 0;
			var _g1 = this.bufferSize;
			while(_g < _g1) this.write(_g++,0);
			return;
		}
		var start = this.playBufferPointer;
		var _g = 0;
		var _g1 = this.bufferSize;
		while(_g < _g1) {
			var i = _g++;
			var sample;
			var poly = this.polyphony[this.playBufferPointer];
			if(poly == 0) {
				sample = 0;
			} else {
				sample = this.playBuffer[this.playBufferPointer] / poly;
			}
			this.write(i,sample);
			this.playBufferPointer++;
			if(this.playBufferPointer == this.loopPoint) {
				this.playBufferPointer = 0;
			}
		}
		this.restore(start,this.bufferSize);
	}
	,_playSound: function(params) {
		this.note.set(params);
		this.writeNoteToBuffers(this.note);
	}
	,_playSong: function(data,opt) {
		this._pause();
		var endFrame = 0;
		var tempo = 240 * Math.pow(2,-1 + 2 * Math.random());
		var beat = 2646000 / tempo | 0;
		var harmonicRange = new gox_IntRange(1,4);
		var offsetRange = new gox_IntRange(0,4);
		this._silence();
		this.loopPoint = this.playBufferSize;
		var _g = 0;
		var _g1 = data.length >> 1;
		while(_g < _g1) {
			var i = _g++;
			var offset = offsetRange.getRandom();
			var tmp = data[i * 2 + 1] * harmonicRange.getRandom();
			this.note.frequency = tmp / harmonicRange.max;
			this.note.amplitude = 1;
			var tmp1 = 2 * Math.PI;
			var tmp2 = Math.random();
			this.note.phase = tmp1 * tmp2;
			this.note.startFrame = (offset + data[i * 2]) * beat | 0;
			this.note.endFrame = (offset + data[i * 2] + 1) * beat - 1 | 0;
			this.note.power = 1000;
			this.note.clip = opt.volume;
			if(this.note.endFrame >= this.playBufferSize) {
				break;
			}
			this.writeNoteToBuffers(this.note);
			endFrame = Math.max(endFrame,this.note.endFrame) | 0;
		}
		this.loopPoint = endFrame + 1;
		this.loopPoint = (this.loopPoint / this.bufferSize | 0) * this.bufferSize;
		this.save(0,this.loopPoint);
		this.playBufferPointer = 0;
		this._continue();
	}
	,save: function(p,length) {
		var _g = p;
		var _g1 = p + length;
		while(_g < _g1) {
			var i = _g++;
			this.playBufferBackup[i] = this.playBuffer[i];
			this.polyphonyBackup[i] = this.polyphony[i];
		}
	}
	,restore: function(p,length) {
		var _g = p;
		var _g1 = p + length;
		while(_g < _g1) {
			var i = _g++;
			this.playBuffer[i] = this.playBufferBackup[i];
			this.polyphony[i] = this.polyphonyBackup[i];
		}
	}
	,_silence: function() {
		var this1 = this.playBuffer;
		var _g = 0;
		var _g1 = this1.length;
		while(_g < _g1) this1[_g++] = 0;
		var this1 = this.polyphony;
		var _g = 0;
		var _g1 = this1.length;
		while(_g < _g1) this1[_g++] = 0;
		var this1 = this.playBufferBackup;
		var _g = 0;
		var _g1 = this1.length;
		while(_g < _g1) this1[_g++] = 0;
		var this1 = this.polyphonyBackup;
		var _g = 0;
		var _g1 = this1.length;
		while(_g < _g1) this1[_g++] = 0;
	}
	,_getPlayBufferPointer: function() {
		return this.playBufferPointer;
	}
	,_setPlayBufferPointer: function(value) {
		this.playBufferPointer = value;
	}
	,_pause: function() {
		this.playing = false;
	}
	,_continue: function() {
		this.playing = true;
	}
};
var gox_TopMessage = function(game,params) {
	this.topBarColors = [gox_Color.BLACK,gox_Color.BLACK];
	this.rightBars = [];
	this.barGhosts = 64;
	this.ghosts = 5;
	this.cirons = [];
	var _gthis = this;
	gox_y_GComponent.call(this);
	this.p = params;
	this.game = game;
	this.addBar();
	game.addEventListener(new gox_y_GEventAdapter({ listeningTo : function() {
		return [gox_Events.RANDOMIZE_COLORS + ""];
	}, onEvent : function(e) {
		_gthis.recolor();
	}}));
};
gox_TopMessage.__name__ = true;
gox_TopMessage.__super__ = gox_y_GComponent;
gox_TopMessage.prototype = $extend(gox_y_GComponent.prototype,{
	addBar: function() {
		this.alpha = this.game.alpha * 0.666;
		this.topBar = new gox_y_GButton({ width : this.game.resolutionW, height : this.game.topMessengerSize});
		var _g = 0;
		var _g1 = this.ghosts;
		while(_g < _g1) {
			var s = Math.abs(_g++) | 0;
			var ciron = new gox_y_GButton({ height : this.game.topMessengerSize, textSize : this.game.topMessengerSize >> 1, margin : this.game.topMessengerSize >> 2, text : "Неда Нешић и Горан Свитлица у великој су љубави.. ."});
			ciron.setZ(1000 - s);
			ciron.pack();
			this.topBar.addChild(ciron);
			this.cirons.push(ciron);
		}
		var _g = 0;
		var _g1 = this.barGhosts;
		while(_g < _g1) {
			++_g;
			var rightBar = new gox_y_GButton({ width : 1, height : this.game.topMessengerSize});
			this.topBar.addChild(rightBar);
			this.rightBars.push(rightBar);
		}
		this.topBar.sortZ();
		this.recolor();
	}
	,recolor: function() {
		var hsb = this.game.colors[gox_TopMessage.flipFlop ? this.p.HEALTHY : this.p.SICK].duplicate().toHSB();
		this.topBarColors[gox_TopMessage.flipFlop ? 0 : 1] = new gox_HSB(hsb.h,1,0.111).toRGB().alpha(this.alpha);
		hsb.b *= 10;
		var _g = 0;
		var _g1 = this.ghosts;
		while(_g < _g1) {
			var j = _g++;
			var g = Math.abs(j / this.ghosts - 0.5);
			g = Math.pow(g,0.1);
			var tmp = hsb.toRGB();
			this.cirons[j].p.foreground = tmp.alpha((1 - g) * 255);
		}
		gox_TopMessage.flipFlop = !gox_TopMessage.flipFlop;
	}
	,updateComponent: function() {
		var offset = HxOverrides.now() / 1000 - gox_TopMessage.startTime;
		var tmp = this.topBarColors[gox_TopMessage.flipFlop ? 0 : 1].duplicate();
		this.topBar.p.background = tmp.mix(this.topBarColors[gox_TopMessage.flipFlop ? 1 : 0],offset).alpha(this.alpha);
		var _g = 0;
		var _g1 = this.ghosts;
		while(_g < _g1) {
			var i = _g++;
			var off = Math.round(i + offset * 100);
			if(i == 0 && off >= this.game.resolutionW + this.cirons[i].width) {
				off = 0;
				gox_TopMessage.startTime = HxOverrides.now() / 1000;
				this.recolor();
			}
			this.cirons[i].x = this.game.resolutionW - off;
		}
		var _g = 0;
		var _g1 = this.barGhosts;
		while(_g < _g1) {
			var i = _g++;
			var tmp = this.topBar.p.background.duplicate();
			this.rightBars[i].p.background = tmp.alpha(i / (this.barGhosts - 1) * 255);
			this.rightBars[i].x = i + this.cirons[this.ghosts - 1].x + this.cirons[this.ghosts - 1].width;
		}
	}
});
var gox_Vector2D = function(x,y) {
	this.x = x;
	this.y = y;
};
gox_Vector2D.__name__ = true;
gox_Vector2D.prototype = {
	toString: function() {
		return "<" + this.x + "," + this.y + ">";
	}
	,duplicate: function() {
		return new gox_Vector2D(this.x,this.y);
	}
	,set: function(x,y) {
		this.x = x;
		this.y = y;
		return this;
	}
	,add: function(vec) {
		this.x += vec.x;
		this.y += vec.y;
		return this;
	}
	,subtract: function(vec) {
		this.x -= vec.x;
		this.y -= vec.y;
		return this;
	}
	,multiply: function(s) {
		this.x *= s;
		this.y *= s;
		return this;
	}
	,distance: function(v) {
		return Math.sqrt(Math.pow(this.x - v.x,2) + Math.pow(this.y - v.y,2));
	}
	,length: function() {
		return Math.sqrt(this.x * this.x + this.y * this.y);
	}
	,signedAngleTo: function(other) {
		return Math.atan2(this.x * other.y - this.y * other.x,this.x * other.x + this.y * other.y);
	}
};
var gox_l_GLayoutManager = function() {
};
gox_l_GLayoutManager.__name__ = true;
gox_l_GLayoutManager.prototype = {
	layout: function(component) {
	}
};
var gox_l_GCenterLayout = function() {
	gox_l_GLayoutManager.call(this);
};
gox_l_GCenterLayout.__name__ = true;
gox_l_GCenterLayout.__super__ = gox_l_GLayoutManager;
gox_l_GCenterLayout.prototype = $extend(gox_l_GLayoutManager.prototype,{
	layout: function(component) {
		var n = component.children.length;
		var _g = 0;
		while(_g < n) {
			var i = _g++;
			var tmp = component.getWidth() >> 1;
			var tmp1 = component.children[i].getWidth() >> 1;
			component.children[i].x = tmp - tmp1;
			var tmp2 = component.getHeight() >> 1;
			var tmp3 = component.children[i].getHeight() >> 1;
			component.children[i].y = tmp2 - tmp3;
		}
	}
});
var gox_l_GEvenVecticalLayout = function() {
	gox_l_GLayoutManager.call(this);
};
gox_l_GEvenVecticalLayout.__name__ = true;
gox_l_GEvenVecticalLayout.__super__ = gox_l_GLayoutManager;
gox_l_GEvenVecticalLayout.prototype = $extend(gox_l_GLayoutManager.prototype,{
	layout: function(component) {
		var n = component.children.length;
		var chunk = component.height / n;
		var _g = 0;
		while(_g < n) {
			var i = _g++;
			component.children[i].x = 0;
			component.children[i].y = i * chunk | 0;
			component.children[i].width = component.width;
			component.children[i].height = Math.ceil(chunk);
		}
	}
});
var gox_y_GButton = function(params) {
	gox_y_GComponent.call(this);
	this.p = params;
	var tmp = params.x;
	this.x = tmp != null ? tmp : 0;
	var tmp = params.y;
	this.y = tmp != null ? tmp : 0;
	var tmp = params.width;
	this.width = tmp != null ? tmp : 0;
	var tmp = params.height;
	this.height = tmp != null ? tmp : 0;
	var tmp = this.p.pressedForeground;
	this.p.pressedForeground = tmp != null ? tmp : this.p.foreground;
	var tmp = params.text;
	this.p.text = tmp != null ? tmp : "";
	var tmp = params.textSize;
	this.p.textSize = tmp != null ? tmp : 0;
	var tmp = params.pressed;
	this.p.pressed = tmp != null && tmp;
	var tmp = params.margin;
	this.p.margin = tmp != null ? tmp : 0;
	var tmp = params.hovered;
	this.p.hovered = tmp != null && tmp;
	var tmp = params.borderWidth;
	this.p.borderWidth = tmp != null ? tmp : 0;
};
gox_y_GButton.__name__ = true;
gox_y_GButton.__super__ = gox_y_GComponent;
gox_y_GButton.prototype = $extend(gox_y_GComponent.prototype,{
	paintComponent: function(engine) {
		gox_y_GComponent.prototype.paintComponent.call(this,engine);
		if(this.p.hovered) {
			if(this.p.hoverBackground != null) {
				engine._setColor(this.p.hoverBackground);
				engine._fillRect(this.getX(),this.getY(),this.getWidth(),this.getHeight());
			}
			if(this.p.hoverForeground != null) {
				engine._setColor(this.p.hoverForeground);
			}
		} else if(this.p.pressed) {
			if(this.p.pressedBackground != null) {
				engine._setColor(this.p.pressedBackground);
				engine._fillRect(this.getX(),this.getY(),this.getWidth(),this.getHeight());
			}
			if(this.p.pressedForeground != null) {
				engine._setColor(this.p.pressedForeground);
			}
		} else {
			if(this.p.background != null) {
				engine._setColor(this.p.background);
				engine._fillRect(this.getX(),this.getY(),this.getWidth(),this.getHeight());
			}
			if(this.p.foreground != null) {
				engine._setColor(this.p.foreground);
			}
		}
		engine._drawTextCentered(this.p.text,this.p.textSize,this.getX() + (this.getWidth() >> 1),this.getY() + (this.getHeight() >> 1));
		if(this.p.borderColor != null) {
			engine._setStroke(this.p.borderWidth);
			engine._setColor(this.p.borderColor);
			engine._drawRect(this.getX(),this.getY(),this.getWidth() - this.p.borderWidth,this.getHeight() - this.p.borderWidth);
		}
	}
	,pack: function() {
		this.width = gox_Game.instance.engine._getTextWidth(this.p.text,this.p.textSize) + 2 * this.p.margin;
		this.height = gox_Game.instance.engine._getTextHeight(this.p.text,this.p.textSize) + 2 * this.p.margin;
	}
});
var gox_y_GEvent = function(name,data) {
	this.name = name;
	this.data = data;
};
gox_y_GEvent.__name__ = true;
var gox_y_GEventAdapter = function(params) {
	this.p = params;
	var tmp = this.p.onEvent;
	this.p.onEvent = tmp != null ? tmp : $bind(this,this.dummy1);
	var tmp = this.p.listeningTo;
	this.p.listeningTo = tmp != null ? tmp : $bind(this,this.dummy2);
};
gox_y_GEventAdapter.__name__ = true;
gox_y_GEventAdapter.prototype = {
	dummy1: function(e) {
	}
	,dummy2: function() {
		return [];
	}
	,onEvent: function(e) {
		this.p.onEvent(e);
	}
	,listeningTo: function() {
		return this.p.listeningTo();
	}
};
var gox_y_GMouseAdapter = function(params) {
	this.p = params;
	var tmp = this.p.onMousePressed;
	this.p.onMousePressed = tmp != null ? tmp : $bind(this,this.dummy);
	var tmp = this.p.onMouseReleased;
	this.p.onMouseReleased = tmp != null ? tmp : $bind(this,this.dummy);
	var tmp = this.p.onMouseMoved;
	this.p.onMouseMoved = tmp != null ? tmp : $bind(this,this.dummy);
	var tmp = this.p.onMouseDragged;
	this.p.onMouseDragged = tmp != null ? tmp : $bind(this,this.dummy);
	var tmp = this.p.onMouseEntered;
	this.p.onMouseEntered = tmp != null ? tmp : $bind(this,this.dummy);
	var tmp = this.p.onMouseExited;
	this.p.onMouseExited = tmp != null ? tmp : $bind(this,this.dummy);
};
gox_y_GMouseAdapter.__name__ = true;
gox_y_GMouseAdapter.prototype = {
	dummy: function(e) {
	}
	,onMousePressed: function(e) {
		this.p.onMousePressed(e);
	}
	,onMouseReleased: function(e) {
		this.p.onMouseReleased(e);
	}
	,onMouseMoved: function(e) {
		this.p.onMouseMoved(e);
	}
	,onMouseDragged: function(e) {
		this.p.onMouseDragged(e);
	}
	,onMouseEntered: function(e) {
		this.p.onMouseEntered(e);
	}
	,onMouseExited: function(e) {
		this.p.onMouseExited(e);
	}
};
var gox_y_GMouseEvent = function(x,y,component) {
	this.x = x;
	this.y = y;
	this.component = component;
};
gox_y_GMouseEvent.__name__ = true;
var haxe_iterators_ArrayIterator = function(array) {
	this.current = 0;
	this.array = array;
};
haxe_iterators_ArrayIterator.__name__ = true;
haxe_iterators_ArrayIterator.prototype = {
	hasNext: function() {
		return this.current < this.array.length;
	}
	,next: function() {
		return this.array[this.current++];
	}
};
var home_GameState = $hxEnums["home.GameState"] = { __ename__:true,__constructs__:null
	,NOP: {_hx_name:"NOP",_hx_index:0,__enum__:"home.GameState",toString:$estr}
	,INTRO: {_hx_name:"INTRO",_hx_index:1,__enum__:"home.GameState",toString:$estr}
	,ABOUT: {_hx_name:"ABOUT",_hx_index:2,__enum__:"home.GameState",toString:$estr}
	,WELCOME: {_hx_name:"WELCOME",_hx_index:3,__enum__:"home.GameState",toString:$estr}
};
home_GameState.__constructs__ = [home_GameState.NOP,home_GameState.INTRO,home_GameState.ABOUT,home_GameState.WELCOME];
var home_Home = function() {
	this.state = home_GameState.WELCOME;
	this.crazy = 11;
	this.PLAYER = 3;
	this.HEALTHY = 2;
	this.SICK = 1;
	this.BLACK = 0;
	this.range = 1;
	gox_Game.call(this);
	this.engine._setTitle("Home");
	this.bottomMessengerSize = 0;
	this.setResolution(Math.round(960.),Math.round(540.));
	this.engine._initBuffers(1);
	this.setQ(Math.round(4.));
	this.createColors();
	this.engine._loop($bind(this,this.logic));
	this.engine._addMouseListener(this);
	this.engine._addKeyboardListener(this);
};
home_Home.__name__ = true;
home_Home.main = function() {
	new home_Home();
};
home_Home.__super__ = gox_Game;
home_Home.prototype = $extend(gox_Game.prototype,{
	setResolution: function(W,H) {
		this.fullResolutionW = W;
		this.fullResolutionH = H;
		this.resolutionW = W;
		this.resolutionH = H - this.topMessengerSize - this.bottomMessengerSize;
		this.engine._setResolution(W,H);
	}
	,setQ: function(q) {
		this.q = q;
	}
	,addShowListener: function() {
		var _gthis = this;
		this.addEventListener(new gox_y_GEventAdapter({ onEvent : function(e) {
			_gthis.state = home_GameState.WELCOME;
		}, listeningTo : function() {
			return [gox_Events.GAME_SHOWN];
		}}));
	}
	,createColors: function() {
		this.colors = new Array(this.PLAYER + 1);
		var _g = 0;
		var _g1 = this.colors.length;
		while(_g < _g1) this.colors[_g++] = new gox_Color(0,0,0);
	}
	,logic: function(dt) {
		switch(this.state._hx_index) {
		case 0:
			break;
		case 1:
			this.vStateChanged();
			new home_scenes_Intro(this);
			this.state = home_GameState.NOP;
			break;
		case 2:
			this.vStateChanged();
			new home_scenes_Help(this,this.SICK,this.HEALTHY);
			this.state = home_GameState.NOP;
			break;
		case 3:
			this.vStateChanged();
			new home_scenes_Welcome(this);
			this.state = home_GameState.NOP;
			break;
		}
		gox_y_GComponent.updateComponents();
		gox_y_GComponent.layoutComponents();
		gox_y_GComponent.paintComponents(this.engine);
	}
	,vStateChanged: function() {
		gox_y_GComponent.destroyComponents();
		this.addShowListener();
		this.randomizeColors();
		new gox_TopMessage(this,{ colors : this.colors, SICK : this.SICK, HEALTHY : this.HEALTHY});
	}
	,onKeyTyped: function(key) {
	}
	,onKeyPressed: function(code) {
	}
	,onMousePressed: function(e) {
		gox_y_GComponent.onMousePressedComponents(e);
	}
	,onMouseReleased: function(e) {
		gox_y_GComponent.onMouseReleasedComponents(e);
	}
	,onMouseMoved: function(e) {
		gox_y_GComponent.onMouseMovedComponents(e);
	}
	,onMouseDragged: function(e) {
		gox_y_GComponent.onMouseDraggedComponents(e);
	}
	,onMouseEntered: function(e) {
	}
	,onMouseExited: function(e) {
	}
	,getR: function(r) {
		return new gox_FloatRange(-r,r).getRandom();
	}
	,randomizeColors: function() {
		this.alpha = 64 * Math.pow(255,1 / this.engine._getFPS());
		this.alphaK = this.alpha / 255;
		this.background = gox_Color.BLACK;
		this.colors[0] = this.background;
		var r = this.crazy / 100;
		var h = Math.random();
		var s = 1.0;
		var b = 1.0;
		this.colors[this.SICK] = new gox_HSB(h + this.getR(r),1.0 + this.getR(r),1.0 + this.getR(r)).toRGB();
		h = h + 0.5 + this.getR(r);
		s = 1;
		b = 1;
		this.colors[this.HEALTHY] = new gox_HSB(h + this.getR(r),s + this.getR(r),b + this.getR(r)).toRGB();
		this.colors[this.PLAYER] = this.colors[this.SICK].duplicate().mix(this.colors[this.HEALTHY]);
		this.fireEvent(new gox_y_GEvent(gox_Events.RANDOMIZE_COLORS));
	}
});
var home_scenes_Help = function(game,r1,r2) {
	gox_Help.call(this,game,r1,r2);
};
home_scenes_Help.__name__ = true;
home_scenes_Help.__super__ = gox_Help;
home_scenes_Help.prototype = $extend(gox_Help.prototype,{
	getText: function() {
		return ["","Game engine made by Goran Svitlica,","using the Haxe programming language,","precompiled to JavaScript and Java,","with the learning help of ChatGPT,","hosted on Git-Hub, cheaply,","\n\t\t\tfrom the VS Code IDE,","having HP toolset,","inspired mind,","nice wishes,","thanks",":-)",""];
	}
	,onClick: function() {
		this.game.state = home_GameState.INTRO;
	}
});
var home_scenes_Intro = function(game) {
	this.game = game;
	var screen = new gox_y_GButton({ y : game.topMessengerSize, width : game.resolutionW, height : game.resolutionH, background : gox_Color.BLACK});
	screen.setLayoutManager(new gox_l_GCenterLayout());
	var menu = new gox_y_GButton({ width : game.resolutionW >> 1, height : game.resolutionH >> 1});
	menu.setLayoutManager(new gox_l_GEvenVecticalLayout());
	screen.addChild(menu);
	var borderColor = gox_Color.WHITE;
	var foreground = gox_Color.WHITE;
	var modeA = new gox_y_GButton({ foreground : foreground, text : "AudioVisionR", textSize : game.fontSize, borderWidth : 2, borderColor : borderColor});
	menu.addChild(modeA);
	var modeB = new gox_y_GButton({ foreground : foreground, text : "Shizopathia", textSize : game.fontSize, borderWidth : 2, borderColor : borderColor});
	menu.addChild(modeB);
	var modeC = new gox_y_GButton({ foreground : foreground, text : "About", textSize : game.fontSize, borderWidth : 2, borderColor : borderColor});
	menu.addChild(modeC);
	modeA.addMouseListener(new gox_y_GMouseAdapter({ onMousePressed : function(e) {
		game.engine._visit("AudioVisionR");
	}}));
	modeB.addMouseListener(new gox_y_GMouseAdapter({ onMousePressed : function(e) {
		game.engine._visit("Shizopathia");
	}}));
	modeC.addMouseListener(new gox_y_GMouseAdapter({ onMousePressed : function(e) {
		game.state = home_GameState.ABOUT;
	}}));
};
home_scenes_Intro.__name__ = true;
var home_scenes_Welcome = function(game) {
	gox_y_GComponent.call(this);
	this.game = game;
	new gox_y_GButton({ y : game.topMessengerSize, width : game.resolutionW, height : game.resolutionH, background : gox_Color.BLACK, foreground : gox_Color.WHITE, text : "WEL(L)COME to GoxyGames", textSize : game.fontSize}).addMouseListener(new gox_y_GMouseAdapter({ onMousePressed : function(e) {
		game.state = home_GameState.INTRO;
	}}));
};
home_scenes_Welcome.__name__ = true;
home_scenes_Welcome.__super__ = gox_y_GComponent;
home_scenes_Welcome.prototype = $extend(gox_y_GComponent.prototype,{
});
var js_Boot = function() { };
js_Boot.__name__ = true;
js_Boot.__string_rec = function(o,s) {
	if(o == null) {
		return "null";
	}
	if(s.length >= 5) {
		return "<...>";
	}
	var t = typeof(o);
	if(t == "function" && (o.__name__ || o.__ename__)) {
		t = "object";
	}
	switch(t) {
	case "function":
		return "<function>";
	case "object":
		if(o.__enum__) {
			var e = $hxEnums[o.__enum__];
			var con = e.__constructs__[o._hx_index];
			var n = con._hx_name;
			if(con.__params__) {
				s = s + "\t";
				return n + "(" + ((function($this) {
					var $r;
					var _g = [];
					{
						var _g1 = 0;
						var _g2 = con.__params__;
						while(true) {
							if(!(_g1 < _g2.length)) {
								break;
							}
							var p = _g2[_g1];
							_g1 = _g1 + 1;
							_g.push(js_Boot.__string_rec(o[p],s));
						}
					}
					$r = _g;
					return $r;
				}(this))).join(",") + ")";
			} else {
				return n;
			}
		}
		if(((o) instanceof Array)) {
			var str = "[";
			s += "\t";
			var _g = 0;
			var _g1 = o.length;
			while(_g < _g1) {
				var i = _g++;
				str += (i > 0 ? "," : "") + js_Boot.__string_rec(o[i],s);
			}
			str += "]";
			return str;
		}
		var tostr;
		try {
			tostr = o.toString;
		} catch( _g ) {
			return "???";
		}
		if(tostr != null && tostr != Object.toString && typeof(tostr) == "function") {
			var s2 = o.toString();
			if(s2 != "[object Object]") {
				return s2;
			}
		}
		var str = "{\n";
		s += "\t";
		var hasp = o.hasOwnProperty != null;
		var k = null;
		for( k in o ) {
		if(hasp && !o.hasOwnProperty(k)) {
			continue;
		}
		if(k == "prototype" || k == "__class__" || k == "__super__" || k == "__interfaces__" || k == "__properties__") {
			continue;
		}
		if(str.length != 2) {
			str += ", \n";
		}
		str += s + k + " : " + js_Boot.__string_rec(o[k],s);
		}
		s = s.substring(1);
		str += "\n" + s + "}";
		return str;
	case "string":
		return o;
	default:
		return String(o);
	}
};
var jsgox_JSEngine = function(options) {
	this.rotated = false;
	this.lastTime = -1;
	this.mouseListeners = [];
	this.keyboardListeners = [];
	this.keyStates = [];
	this.mouseY = -666;
	this.mouseX = -666;
	var _gthis = this;
	this._setFPS(options.fps);
	var _g = [];
	var _g1 = 0;
	while(_g1 < 1024) {
		++_g1;
		_g.push(false);
	}
	this.keyStates = _g;
	this.initEvents();
	window.setTimeout(function() {
		_gthis.resizeCanvas();
	},10);
};
jsgox_JSEngine.__name__ = true;
jsgox_JSEngine.prototype = {
	initEvents: function() {
		var _gthis = this;
		window.addEventListener("resize",$bind(this,this.resizeCanvas));
		window.document.onpointermove = function(e) {
			if(_gthis.mouseDown) {
				_gthis.onMouseDragged(e);
			} else {
				_gthis.onMouseMoved(e);
			}
			e.preventDefault();
		};
		window.document.onpointerdown = function(e) {
			_gthis.onMouseDown(e);
			e.preventDefault();
		};
		window.document.onpointercancel = function(e) {
			_gthis.onMouseUp(e);
		};
		window.document.onpointerup = function(e) {
			_gthis.onMouseUp(e);
		};
		window.document.onkeydown = function(e) {
			_gthis.keyStates[e.keyCode] = true;
			var _g = 0;
			var _g1 = _gthis.keyboardListeners;
			while(_g < _g1.length) _g1[_g++].onKeyPressed(e.keyCode);
			var _g = 0;
			var _g1 = _gthis.keyboardListeners;
			while(_g < _g1.length) _g1[_g++].onKeyTyped(e.key);
			if(e.key == "Backspace") {
				e.preventDefault();
			}
		};
		window.document.onkeyup = function(e) {
			return _gthis.keyStates[e.keyCode] = false;
		};
		window.addEventListener("pageshow",function(e) {
			gox_Game.instance.fireEvent(new gox_y_GEvent(gox_Events.GAME_SHOWN));
		});
	}
	,onMouseDown: function(e) {
		this.setMouseCoordinates(e);
		var _g = 0;
		var _g1 = this.mouseListeners;
		while(_g < _g1.length) _g1[_g++].onMousePressed(new gox_y_GMouseEvent(this._getMouseX(),this._getMouseY(),null));
		this.mouseDown = true;
	}
	,onMouseUp: function(e) {
		this.setMouseCoordinates(e);
		var _g = 0;
		var _g1 = this.mouseListeners;
		while(_g < _g1.length) _g1[_g++].onMouseReleased(new gox_y_GMouseEvent(this._getMouseX(),this._getMouseY(),null));
		this.mouseDown = false;
	}
	,onMouseMoved: function(e) {
		this.setMouseCoordinates(e);
		var _g = 0;
		var _g1 = this.mouseListeners;
		while(_g < _g1.length) _g1[_g++].onMouseMoved(new gox_y_GMouseEvent(this._getMouseX(),this._getMouseY(),null));
	}
	,onMouseDragged: function(e) {
		this.setMouseCoordinates(e);
		var _g = 0;
		var _g1 = this.mouseListeners;
		while(_g < _g1.length) _g1[_g++].onMouseDragged(new gox_y_GMouseEvent(this._getMouseX(),this._getMouseY(),null));
	}
	,setMouseCoordinates: function(e) {
		var rec = this.canvas.getBoundingClientRect();
		var v1 = this.mouse2image(this.newW,this.newH,e.clientX - rec.left,e.clientY - rec.top);
		this.mouseX = v1.x | 0;
		this.mouseY = v1.y | 0;
	}
	,mouse2image: function(width,height,x,y) {
		if(!this.rotated) {
			return new gox_Vector2D(this.resolutionW * (x / width),this.resolutionH * y / height);
		}
		return new gox_Vector2D(this.resolutionW * (1 - y / height),this.resolutionH * x / width);
	}
	,_initBuffers: function(count) {
		this.canvass = [];
		this.ctxs = [];
		var _g = 0;
		while(_g < count) {
			var i = _g++;
			this.canvass.push(window.document.createElement("canvas"));
			this.canvass[i].width = this.resolutionW;
			this.canvass[i].height = this.resolutionH;
			window.document.body.appendChild(this.canvass[i]);
			this.ctxs.push(this.canvass[i].getContext("2d",null));
			this.canvass[i].style.display = "none";
		}
		this._selectBuffer(0);
		var _g = [];
		var _g1 = 0;
		var _g2 = this.resolutionH;
		while(_g1 < _g2) {
			++_g1;
			var _g3 = [];
			var _g4 = 0;
			var _g5 = this.resolutionW;
			while(_g4 < _g5) {
				++_g4;
				_g3.push(0);
			}
			_g.push(_g3);
		}
		this.pixels = _g;
	}
	,_selectBuffer: function(index) {
		if(this.canvas != null) {
			this.canvas.style.display = "none";
		}
		this.canvass[index].style.display = "block";
		this.canvas = this.canvass[index];
		this.ctx = this.ctxs[index];
	}
	,_init: function(playBufferSize) {
		this.player = new jsgox_JSPlayer(playBufferSize);
	}
	,_setResolution: function(w,h) {
		this.resolutionW = w;
		this.resolutionH = h;
	}
	,_setFPS: function(value) {
		this.fps = value;
		this.lastTime = HxOverrides.now() / 1000;
		this.frameTime = 1.0 / this.fps;
	}
	,_getFPS: function() {
		return this.fps;
	}
	,_visit: function(title) {
		window.location.assign(title + ".html");
	}
	,_loop: function(callback) {
		var _gthis = this;
		var loop = null;
		loop = function(time) {
			var time = HxOverrides.now() / 1000;
			if(time - _gthis.lastTime >= _gthis.frameTime) {
				callback(_gthis.frameTime);
				_gthis.lastTime = time;
			}
			window.requestAnimationFrame(loop);
		};
		window.requestAnimationFrame(loop);
	}
	,toHex: function(r,g,b) {
		return "#" + StringTools.hex(r,2) + StringTools.hex(g,2) + StringTools.hex(b,2);
	}
	,_setColor: function(c) {
		var c1 = c.a == 255 ? this.toHex(c.r,c.g,c.b) : "rgba(" + c.r + "," + c.g + "," + c.b + "," + c.a / 255 + ")";
		this.ctx.fillStyle = c1;
		this.ctx.strokeStyle = c1;
	}
	,_setStroke: function(width) {
		this.ctx.lineCap = "round";
		this.ctx.lineJoin = "round";
		this.ctx.lineWidth = width;
	}
	,_drawLine: function(x1,y1,x2,y2) {
		this.ctx.beginPath();
		this.ctx.moveTo(x1,y1);
		this.ctx.lineTo(x2,y2);
		this.ctx.stroke();
	}
	,_fillRect: function(x,y,width,height) {
		this.ctx.fillRect(x,y,width,height);
	}
	,_drawRect: function(x,y,width,height) {
		this.ctx.strokeRect(x,y,width,height);
	}
	,_getTextWidth: function(s,size) {
		this.ctx.font = "bold " + size + "px sans-serif";
		this.ctx.textAlign = "left";
		this.ctx.textBaseline = "middle";
		var metrics = this.ctx.measureText(s);
		return metrics.width | 0;
	}
	,_getTextHeight: function(s,size) {
		return size;
	}
	,_drawText: function(s,size,x,y) {
		this.ctx.font = "bold " + size + "px sans-serif";
		this.ctx.textAlign = "left";
		this.ctx.textBaseline = "middle";
		this.ctx.fillText(s,x,y);
	}
	,_drawTextCentered: function(s,size,cx,cy) {
		this.ctx.font = "bold " + size + "px sans-serif";
		var metrics = this.ctx.measureText(s);
		var textWidth = metrics.width;
		var x = Math.round(cx - textWidth / 2);
		this.ctx.textAlign = "left";
		this.ctx.textBaseline = "middle";
		this.ctx.fillText(s,x,cy);
	}
	,_getBluePixels: function() {
		var imageData = this.ctx.getImageData(0,0,this.resolutionW,this.resolutionH);
		var data = imageData.data;
		var _g = 0;
		var _g1 = this.resolutionH;
		while(_g < _g1) {
			var y = _g++;
			var _g2 = 0;
			var _g3 = this.resolutionW;
			while(_g2 < _g3) {
				var x = _g2++;
				this.pixels[y][x] = data[(y * this.resolutionW + x) * 4 + 2];
			}
		}
		return this.pixels;
	}
	,_repaint: function() {
	}
	,_capture: function(capture) {
		this.canvas.style.cursor = capture ? "none" : "default";
	}
	,_addMouseListener: function(listener) {
		this.mouseListeners.push(listener);
	}
	,_getMouseX: function() {
		return Math.round(this.mouseX);
	}
	,_getMouseY: function() {
		return Math.round(this.mouseY);
	}
	,_isMouseDown: function() {
		return this.mouseDown;
	}
	,_flushMouse: function() {
		this.mouseDown = false;
	}
	,_addKeyboardListener: function(listener) {
		this.keyboardListeners.push(listener);
	}
	,_keyStates: function() {
		return this.keyStates;
	}
	,_flushKeyStates: function() {
		var _g = 0;
		var _g1 = this.keyStates.length;
		while(_g < _g1) this.keyStates[_g++] = false;
	}
	,_flushInput: function() {
		this._flushMouse();
		this._flushKeyStates();
	}
	,_message: function(s) {
		window.alert(Std.string(s));
	}
	,_setTitle: function(s) {
		window.document.title = s;
	}
	,resizeCanvas: function() {
		var w = window.innerWidth;
		var h = window.innerHeight;
		var targetRatio;
		var currentRatio = w / h;
		if(currentRatio < 1) {
			targetRatio = this.resolutionH / this.resolutionW;
			this.rotated = true;
		} else {
			targetRatio = this.resolutionW / this.resolutionH;
			this.rotated = false;
		}
		if(currentRatio > targetRatio) {
			this.newH = h;
			this.newW = h * targetRatio | 0;
		} else {
			this.newW = w;
			this.newH = w / targetRatio | 0;
		}
		var _g = 0;
		var _g1 = this.canvass;
		while(_g < _g1.length) {
			var canvas = _g1[_g];
			++_g;
			if(this.rotated) {
				canvas.style.transform = "rotate(-90deg)";
				canvas.style.transformOrigin = "50% 50%";
				canvas.style.width = this.newH + "px";
				canvas.style.height = this.newW + "px";
			} else {
				canvas.style.transform = "none";
				canvas.style.transformOrigin = "50% 50%";
				canvas.style.width = this.newW + "px";
				canvas.style.height = this.newH + "px";
			}
		}
	}
};
var jsgox_JSPlayer = function(playBufferSize) {
	gox_Player.call(this,playBufferSize);
	this.init();
};
jsgox_JSPlayer.__name__ = true;
jsgox_JSPlayer.__super__ = gox_Player;
jsgox_JSPlayer.prototype = $extend(gox_Player.prototype,{
	restart: function() {
		if(this.processor != null) {
			this.processor.disconnect();
			this.processor.onaudioprocess = null;
			this.processor = null;
		}
		if(this.context != null) {
			this.context.close();
			this.context = null;
		}
		this.init();
	}
	,init: function() {
		this.context = new AudioContext({ sampleRate : this.sampleRate});
		this.processor = this.context.createScriptProcessor(this.bufferSize,0,1);
		this.processor.onaudioprocess = $bind(this,this.onAudio);
		this.processor.connect(this.context.destination);
	}
	,onAudio: function(e) {
		this.buffer = e.outputBuffer.getChannelData(0);
		this.step();
	}
	,write: function(pos,sample) {
		var s = sample;
		if(sample > 1) {
			s = 1;
		}
		if(s < -1) {
			s = -1;
		}
		this.buffer[pos] = s;
	}
	,_playSong: function(data,opt) {
		gox_Player.prototype._playSong.call(this,data,opt);
		this.restart();
	}
});
function $bind(o,m) { if( m == null ) return null; if( m.__id__ == null ) m.__id__ = $global.$haxeUID++; var f; if( o.hx__closures__ == null ) o.hx__closures__ = {}; else f = o.hx__closures__[m.__id__]; if( f == null ) { f = m.bind(o); o.hx__closures__[m.__id__] = f; } return f; }
$global.$haxeUID |= 0;
if(typeof(performance) != "undefined" ? typeof(performance.now) == "function" : false) {
	HxOverrides.now = performance.now.bind(performance);
}
String.__name__ = true;
Array.__name__ = true;
js_Boot.__toStr = ({ }).toString;
gox_Color.BLACK = new gox_Color(0,0,0);
gox_Color.WHITE = new gox_Color(255,255,255);
gox_Color.RED = new gox_Color(255,0,0);
gox_Color.GREEN = new gox_Color(0,255,0);
gox_Color.BLUE = new gox_Color(0,0,255);
gox_Color.YELLOW = new gox_Color(255,255,0);
gox_Color.CYAN = new gox_Color(0,255,255);
gox_Color.MAGENTA = new gox_Color(255,0,255);
gox_Events.RANDOMIZE_COLORS = "RANDOMIZE_COLORS";
gox_Events.LEVEL_CHANGED = "LEVEL_CHANGED";
gox_Events.PLAYER_INTERACTED = "PLAYER_INTERACTED";
gox_Events.GAME_SHOWN = "GAME_SHOWN";
gox_y_GComponent.components = [];
gox_Game.VK_ESCAPE = 27;
gox_Game.VK_F1 = 112;
gox_Game.VK_F2 = 113;
gox_Game.VK_F3 = 114;
gox_Game.VK_F4 = 115;
gox_Game.VK_F5 = 116;
gox_Game.VK_F6 = 117;
gox_Game.VK_F7 = 118;
gox_Game.VK_F8 = 119;
gox_Game.VK_F9 = 120;
gox_Game.VK_F10 = 121;
gox_Game.VK_F11 = 122;
gox_Game.VK_F12 = 123;
gox_Game.VK_ENTER = 10;
gox_Game.VK_BACKSPACE = 8;
gox_Game.VK_CTRL = 17;
gox_Game.VK_SPACE = 32;
gox_Game.VK_LEFT = 37;
gox_Game.VK_UP = 38;
gox_Game.VK_RIGHT = 39;
gox_Game.VK_DOWN = 40;
gox_Game.VK_NUMPAD0 = 96;
gox_Game.VK_NUMPAD1 = 97;
gox_Game.VK_NUMPAD2 = 98;
gox_Game.VK_NUMPAD3 = 99;
gox_Game.VK_NUMPAD4 = 100;
gox_Game.VK_NUMPAD5 = 101;
gox_Game.VK_NUMPAD6 = 102;
gox_Game.VK_NUMPAD7 = 103;
gox_Game.VK_NUMPAD8 = 104;
gox_Game.VK_NUMPAD9 = 105;
gox_Game.VK_NUMPAD_PLUS = 107;
gox_Game.VK_NUMPAD_MINUS = 109;
gox_Game.VK_NUMPAD_DOT = 110;
gox_Game.VK_A = 65;
gox_Game.VK_B = 66;
gox_Game.VK_C = 67;
gox_Game.VK_D = 68;
gox_Game.VK_E = 69;
gox_Game.VK_F = 70;
gox_Game.VK_G = 71;
gox_Game.VK_H = 72;
gox_Game.VK_I = 73;
gox_Game.VK_J = 74;
gox_Game.VK_K = 75;
gox_Game.VK_L = 76;
gox_Game.VK_M = 77;
gox_Game.VK_N = 78;
gox_Game.VK_O = 79;
gox_Game.VK_P = 80;
gox_Game.VK_Q = 81;
gox_Game.VK_R = 82;
gox_Game.VK_S = 83;
gox_Game.VK_T = 84;
gox_Game.VK_U = 85;
gox_Game.VK_V = 86;
gox_Game.VK_W = 87;
gox_Game.VK_X = 88;
gox_Game.VK_Y = 89;
gox_Game.VK_Z = 90;
gox_Game.VK_CLOSED_SQUARE_BRACKET = 91;
gox_Game.VK_OPEN_SQUARE_BRACKET = 93;
gox_Game.VK_SEMICOLON = 59;
gox_Game.VK_COLON = 222;
gox_Game.VK_BACKSLASH = 92;
gox_Game.VK_SHIFT = 16;
gox_TopMessage.flipFlop = false;
gox_TopMessage.startTime = HxOverrides.now() / 1000;
home_Home.main();
})(typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this);
